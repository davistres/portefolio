<div id="ajax-page" class="ajax-page-content">
    <div class="ajax-page-wrapper">
        <div class="ajax-page-nav">
            <div class="nav-item ajax-page-prev-next">
                <a class="ajax-page-load" href="portfolio-6.html"><i class="pe-7s-icon pe-7s-angle-left"></i></a>
                <a class="ajax-page-load" href="portfolio-8.html"><i class="pe-7s-icon pe-7s-angle-right"></i></a>
            </div>
            <div class="nav-item ajax-page-close-button">
                <a id="ajax-page-close-button" href="#"><i class="pe-7s-icon pe-7s-close"></i></a>
            </div>
        </div>

        <div class="ajax-page-title">
            <h1>Memory Game Avancé</h1>
        </div>

        <div class="row">
            <div class="col-sm-12 col-md-8 portfolio-block">
                <!-- Jeu Memory interactif -->
                <div class="portfolio-page-video" style="position: relative; padding-bottom: 75%; height: 0; overflow: hidden; min-height: 600px;">
                <iframe class="embed-responsive-item" src="0/7- MemoryGame avec mode/index.html" title="Memory Game Avancé" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none;"></iframe>
                </div>

                <script type="text/javascript">
                    function customAjaxScroll() {
                        var windowWidth = $(window).width();
                        if (windowWidth > 991) {
                            // Scroll personnalisé pour la page Ajax
                            $("#ajax-page").mCustomScrollbar({
                                scrollInertia: 8,
                                documentTouchScroll: false
                            });
                        } else {
                            $("#ajax-page").mCustomScrollbar('destroy');
                        }
                    }

                    jQuery(document).ready(function($){
                        customAjaxScroll();

                        var carousel = $('.portfolio-page-carousel');

                        carousel.owlCarousel({
                            smartSpeed: 1200,
                            items: 1,
                            loop: true,
                            dots: true,
                            nav: true,
                            navText: false,
                            margin: 10,
                            autoHeight: true
                        });

                        function positionNavArrows() {
                            var allMedia = carousel.find('.owl-item img, .owl-item video');
                            if (allMedia.length === 0) return;

                            var loadPromises = allMedia.map(function() {
                                var deferred = $.Deferred();
                                var element = this;
                                
                                var resolveHeight = function() {
                                    var height = $(element).height();
                                    deferred.resolve(height > 0 ? height : Infinity);
                                };

                                if (element.tagName === 'VIDEO') {
                                    if (element.readyState >= 1) resolveHeight();
                                    else $(element).on('loadedmetadata', resolveHeight).on('error', () => deferred.resolve(Infinity));
                                } else { // IMG
                                    if (element.complete) resolveHeight();
                                    else $(element).on('load', resolveHeight).on('error', () => deferred.resolve(Infinity));
                                }
                                return deferred.promise();
                            }).get();

                            $.when.apply($, loadPromises).done(function() {
                                var heights = [].slice.call(arguments).filter(h => h !== Infinity);
                                if (heights.length > 0) {
                                    var minHeight = Math.min.apply(null, heights);
                                    if (minHeight > 0) {
                                        var navTopPosition = minHeight / 2;
                                        var navContainer = carousel.find('.owl-nav');
                                        navContainer.css({
                                            'top': navTopPosition + 'px',
                                            'margin-top': '0',
                                            'transform': 'translateY(-50%)'
                                        });
                                    }
                                }
                            });
                        }

                        carousel.on('initialized.owl.carousel', function() {
                            // Un délai pour s'assurer que les images sont bien en cours de chargement
                            setTimeout(positionNavArrows, 100);
                        });

                        var resizeTimeout;
                        $(window).on('resize', function() {
                            customAjaxScroll();
                            clearTimeout(resizeTimeout);
                            resizeTimeout = setTimeout(positionNavArrows, 250);
                        });
                    });
                </script>
            </div>

            <div class="col-sm-12 col-md-4 portfolio-block">
                <!-- Description du projet -->
                <div class="block-title">
                    <h3>Description</h3>
                </div>
                <ul class="project-general-info">
                    <li><p><i class="fa fa-user"></i> David D'AMORE</p></li>
                    <li><p><i class="fa fa-globe"></i> <a href="https://github.com/davistres" target="_blank">github.com/davistres</a></p></li>
                    <li><p><i class="fa fa-calendar"></i> 2024</p></li>
                </ul>

                <p class="text-justify">Jeu de Memory interactif développé en JavaScript vanilla avec trois modes de jeu distincts : Mode Libre (sans contrainte), Mode 15 (limité à 15 coups) et Mode Timer (chronométré). Le jeu inclut un système de sauvegarde des meilleurs scores en localStorage, une interface responsive et des animations CSS fluides. Ce projet démontre ma maîtrise du JavaScript ES6+, de la manipulation du DOM et de la gestion d'état côté client.</p>
                

                <!-- Technologies -->
                <div class="tags-block">
                    <div class="block-title">
                        <h3>Technologie</h3>
                    </div>
                    <ul class="tags">
                        <li><a>HTML5</a></li>
                        <li><a>CSS3</a></li>
                        <li><a>JavaScript ES6+</a></li>
                        <li><a>LocalStorage</a></li>
                        <li><a>Responsive Design</a></li>
                        <li><a>Animations CSS</a></li>
                    </ul>
                </div>
                

                <!-- Boutons de partage -->
                <div class="btn-group share-buttons">
                    <div class="block-title">
                        <h3>Partage</h3>
                    </div>
                    <a href="https://www.linkedin.com/in/david-d-amore-362307107/" target="_blank" class="btn"><i class="fa fa-linkedin"></i> </a>
                    <a href="https://github.com/davistres" target="_blank" class="btn"><i class="fa fa-github"></i> </a>
                </div>
            </div>
        </div>
    </div>
</div>
